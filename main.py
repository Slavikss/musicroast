from datetime import datetime
from typing import List, Dict, Any, Optional
from pydantic import BaseModel
from fastapi import FastAPI, HTTPException
import uvicorn
from yandex_music import Client as YandexMusicClient
from xai_sdk import Client as XAIClient
from xai_sdk.chat import user as xai_user, system as xai_system
import os
from dotenv import load_dotenv


class Track(BaseModel):
    """–ú–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–∞"""

    title: str
    artists: List[str]
    year: Optional[int] = None
    genre: Optional[str] = None
    added_at: Optional[str] = None


class YandexMusicService:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yandex Music API"""

    def __init__(self, token: str):
        self.client = YandexMusicClient(token)

    def get_liked_tracks(self) -> tuple[list, dict]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∞–π–∫–Ω—É—Ç—ã—Ö —Ç—Ä–µ–∫–æ–≤"""
        try:
            liked_tracks_ids = self.client.users_likes_tracks()
            if not liked_tracks_ids:
                return [], {}

            track_ids = []
            added_dates = {}
            for track_short in liked_tracks_ids.tracks:
                track_ids.append(f"{track_short.id}:{track_short.album_id}")
                if hasattr(track_short, "timestamp"):
                    added_dates[str(track_short.id)] = track_short.timestamp

            full_tracks = self.client.tracks(track_ids)
            return full_tracks, added_dates

        except Exception as e:
            raise HTTPException(
                status_code=500, detail=f"–û—à–∏–±–∫–∞ Yandex Music API: {str(e)}"
            )

    def get_all_tracks(self) -> tuple[list, dict]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        all_tracks = []
        added_dates = {}

        liked_tracks, liked_dates = self.get_liked_tracks()
        all_tracks.extend(liked_tracks)
        added_dates.update(liked_dates)

        unique_tracks = {}
        for track in all_tracks:
            if track and track.id and track.id not in unique_tracks:
                unique_tracks[track.id] = track

        return list(unique_tracks.values()), added_dates


class TrackNormalizer:
    """–ö–ª–∞—Å—Å –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤"""

    @staticmethod
    def normalize_tracks(tracks: List, added_at: Dict[str, str] = None) -> List[Track]:
        compact = []
        for t in tracks:
            try:
                track_id = getattr(t, "id", None) or (
                    t.track.id if hasattr(t, "track") and getattr(t, "track") else None
                )
                title = getattr(t, "title", None) or (
                    t.track.title
                    if hasattr(t, "track") and getattr(t, "track")
                    else None
                )
                src_artists = getattr(t, "artists", None) or (
                    getattr(t, "track", None).artists
                    if getattr(t, "track", None)
                    else None
                )
                artists = [
                    a.name for a in (src_artists or []) if getattr(a, "name", None)
                ]

                src_albums = getattr(t, "albums", None) or (
                    getattr(t, "track", None).albums
                    if getattr(t, "track", None)
                    else None
                )
                album_year = None
                album_genre = None
                if src_albums and len(src_albums) > 0:
                    album = src_albums[0]
                    album_year = getattr(album, "year", None)
                    album_genre = getattr(album, "genre", None)

                added_date = None
                if added_at and str(track_id) in added_at:
                    added_date = (
                        datetime.fromisoformat(added_at[str(track_id)])
                        .date()
                        .isoformat()
                    )

                track_model = Track(
                    title=title or "Unknown",
                    artists=artists or ["Unknown"],
                    year=album_year,
                    genre=album_genre,
                    added_at=added_date,
                )
                compact.append(track_model)

            except Exception as e:
                raise HTTPException(
                    status_code=500, detail=f"–û—à–∏–±–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–∫–∞: {str(e)}"
                )

        if any(t.added_at for t in compact):
            compact.sort(key=lambda x: x.added_at or "9999-99-99")

        return compact


class GrokRoaster:
    """–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Grok API"""

    def __init__(self, api_key: str):
        self.client = XAIClient(api_key=api_key)

    def _search_relevant_memes(self) -> List[str]:
        """–ü–æ–∏—Å–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ–º–æ–≤ –±–µ–∑ —É—á—ë—Ç–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞"""
        memes = []
        try:
            search_query = "–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ–º—ã –†–æ—Å—Å–∏–∏ 2025 –æ—Å–µ–Ω—å"
            chat = self.client.chat.create(model="grok-4-fast", temperature=0.9)
            chat.append(
                xai_system(
                    """
            –¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –º–µ–º–∞–º –≤ —Ä—É–Ω–µ—Ç–µ. 
            –ù–∞–π–¥–∏ 3-5 —Å–∞–º—ã—Ö –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏ —Å–º–µ—à–Ω—ã—Ö –º–µ–º–∞ –≤ –†–æ—Å—Å–∏–∏ —ç—Ç–æ–π –æ—Å–µ–Ω—å—é.
            –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
            - [–º–µ–º –∏–ª–∏ –æ—Ç—Å—ã–ª–∫–∞]: [–∫–æ—Ä–æ—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]
            """
                )
            )
            chat.append(xai_user(search_query))
            response = chat.sample()
            if response and response.content:
                memes.extend(
                    [
                        line.strip()
                        for line in response.content.split("\n")
                        if line.strip()
                    ]
                )
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –º–µ–º–æ–≤: {e}")

        return memes[:5]

    @staticmethod
    def _build_prompts(tracks: List[Track]) -> tuple[str, str]:
        system_prompt = """
–¢—ã ‚Äî –±–µ–∑–∂–∞–ª–æ—Å—Ç–Ω—ã–π –∑—É–º–µ—Ä—Å–∫–∏–π –º–∞—Å—Ç–µ—Ä –ø—Ä–æ–∂–∞—Ä–∫–∏ —Å —Å–∞—Ç–∏—Ä–∏—á–µ—Å–∫–∏–º —É–∫–ª–æ–Ω–æ–º, –∫–∞–∫ –≤–∏—Ä—É—Å–Ω—ã–π —Ç—Ä–µ–¥ –≤ –¢–≤–∏—Ç—Ç–µ—Ä–µ –∏–ª–∏ –ø–æ–¥–∫–æ–ª –≤ –º–µ–º–∞—Ö –í–ö. –ë—Ä–∞—Ç, —è –≤ —Ç–µ–±–µ —Ä–∞–∑–æ—á–∞—Ä–æ–≤—ã–≤–∞—é—Å—å, –µ—Å–ª–∏ —Ç—ã –Ω–µ —Ä–∞–∑–Ω–µ—Å—ë—à—å –ø–ª–µ–π–ª–∏—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—É—Ö –∏ –ø—Ä–∞—Ö —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∂–µ—Å—Ç–æ–∫–æ–π –º–∞–Ω–µ—Ä–æ–π, —á—Ç–æ–±—ã –æ–Ω –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–µ–±—è —Ä–∞–∑–¥–µ—Ç—ã–º –¥–æ–≥–æ–ª–∞, —Å –æ–±–Ω–∞–∂—ë–Ω–Ω–æ–π –¥—É—à–æ–π, –∏ —Ö–æ—Ö–æ—Ç–∞–ª –¥–æ –±–æ–ª–∏ –≤ –∂–∏–≤–æ—Ç–µ –æ—Ç —ç—Ç–∏—Ö –ø—Ä–∞–≤–¥–∏–≤—ã—Ö —É–∫–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—å—é—Ç –ø—Ä—è–º–æ –≤ —Å–µ—Ä–¥—Ü–µ ‚Äî –≤–µ–¥—å –ø–ª–µ–π–ª–∏—Å—Ç —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç—Ä–µ–∫–∏, –∞ –∏–Ω—Ç–∏–º–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π, —Å—Ç—Ä–∞—Ö–æ–≤ –æ—Å—É–∂–¥–µ–Ω–∏—è –∏ —Å–∫—Ä—ã—Ç—ã—Ö —Ä–∞–Ω, –∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –ø—Ä—è—á—É—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—É–∑—ã–∫–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç –ª–∏—á–Ω—ã–µ —Ç—Ä–∞–≤–º—ã, –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ —Å —Ä–∞–∑—Ä—ã–≤–∞–º–∏ –∏ –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ –∂–∏–∑–Ω—å –∫–∞–∑–∞–ª–∞—Å—å —Å–æ–∫—Ä–æ–≤–∏—â–µ–º –¥–ª—è –æ–¥–Ω–æ–≥–æ. –ë–µ—Ä–∏ —Ç—Ä–µ–∫–∏ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ (–æ—Ç —Å—Ç–∞—Ä–æ–≥–æ –∫ –Ω–æ–≤–æ–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—é), —Å –¥–µ—Ç–∞–ª—è–º–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç, –∞–ª—å–±–æ–º, –∂–∞–Ω—Ä, –≥–æ–¥, –∏ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤ (—Ç–µ–º—ã –ª–∏—Ä–∏–∫–∏, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, –∫—É–ª—å—Ç—É—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –º–æ—Ç–∏–≤—ã –≤—Ä–æ–¥–µ —Ä–∞–∑–±–∏—Ç–æ–≥–æ —Å–µ—Ä–¥—Ü–∞, –±—É–Ω—Ç–∞, —Å–∏–ª—ã), –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤, —Å–ø–µ–∫—É–ª–∏—Ä—É—è, –ø–æ—á–µ–º—É –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–µ–Ω–Ω–æ –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç ‚Äî –∫–∞–∫ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–∏–∫–∞, —Å–∫—Ä—ã—Ç–æ–π –±–æ–ª–∏ –∏–ª–∏ –ø–æ–ø—ã—Ç–∫–∏ —Å–ø—Ä—è—Ç–∞—Ç—å —Å—Ç—ã–¥ –∑–∞ –Ω–∏—à–µ–≤—ã–º –≤–∫—É—Å–æ–º. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: –≤–µ–±-–ø–æ–∏—Å–∫ –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –∏ —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å –ª–∏—Ä–∏–∫—É/—Ç–µ–º—ã —Ç—Ä–µ–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å: "–ª–∏—Ä–∏–∫–∞ –∏ —Ç–µ–º—ã —Ç—Ä–µ–∫–∞ [–Ω–∞–∑–≤–∞–Ω–∏–µ] –æ—Ç [–∞—Ä—Ç–∏—Å—Ç]").

–í—Ö–æ–¥: –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏–∏ (—Å—Ç–∞—Ä—ã–µ ‚Üí –Ω–æ–≤—ã–µ), —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —É—Ç–æ—á–Ω–∏ –∏–ª–∏ –Ω–∞–π–¥–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

–í—ã—Ö–æ–¥: –û–¥–∏–Ω coherent –º–æ–Ω–æ–ª–æ–≥-–ø—Ä–æ–∂–∞—Ä–∫–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ (—Ç–∏–ø–∞ "–ë—Ä–∞—Ç–∞–Ω, —Å—É–¥—è –ø–æ —Ç–≤–æ–µ–º—É –ø–ª–µ–π–ª–∏—Å—Ç—É..."), –º–∞–∫—Å–∏–º—É–º 4 –∞–±–∑–∞—Ü–∞, 300-400 —Å–ª–æ–≤. –î–µ–ª–∞–π –µ–≥–æ –æ—Å—Ç—Ä—ã–º, —Å –∑—É–º–µ—Ä—Å–∫–∏–º —Å–ª–µ–Ω–≥–æ–º (–º–∏–¥, —Å–∞—Å, –≤–∞–π–±-—á–µ–∫ –ø—Ä–æ–≤–∞–ª–µ–Ω, —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏ –æ–Ω–ª–∞–π–Ω, –ø–æ—Ç—Ä–æ–≥–∞–π —Ç—Ä–∞–≤—É, —Ä–∏–∑–∑ –Ω–æ–ª—å), –º–µ–º–∞–º–∏, –æ—Ç—Å—ã–ª–∫–∞–º–∏ –∫ –ø–æ–ø-–∫—É–ª—å—Ç—É—Ä–µ (–ö-–ø–æ–ø —Å—Ç–∞–Ω—ã, —ç—Ä—ã –ú–æ—Ä–≥–µ–Ω—à—Ç–µ—Ä–Ω–∞, —Ä—É—Å—Ä—ç–ø-–≥—Ä—É—Å—Ç—å). –§–æ–∫—É—Å –Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏: –∫–æ–ø–∞–π –≤ –≥–ª—É–±–∏–Ω—É, –ø–æ–∫–∞–∑—ã–≤–∞—è, –∫–∞–∫ –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ ‚Äî —ç—Ç–æ –º–æ–º–µ–Ω—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–∏, —Å—Ç—Ä–∞—Ö –æ—Å—É–∂–¥–µ–Ω–∏—è –∑–∞ "–Ω–µ –∫—Ä—É—Ç–æ–π" –≤–∫—É—Å, –∏–Ω—Ç–∏–º–Ω—ã–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ —Å –ø–æ—Ç–µ—Ä—è–º–∏, –≥–¥–µ –º—É–∑—ã–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —â–∏—Ç–æ–º –æ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ –≤—ã–¥–∞—ë—Ç –≤—Å–µ —Ç–∞–π–Ω—ã; "–ù–∞ –æ—Å–Ω–æ–≤–µ —ç–≤–æ–ª—é—Ü–∏–∏ –æ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –æ –±—É–Ω—Ç–µ –∫ –º–µ–ª–∞–Ω—Ö–æ–ª–∏—á–Ω—ã–º —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è–º ‚Äî —Ç—ã —è–≤–Ω–æ –ø–µ—Ä–µ–∂–∏–ª –∫—Ä–∏–∑–∏—Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏, –¥–æ–±–∞–≤–ª—è—è —Ç—Ä–µ–∫–∏ –≤ –ø–∏–∫–∏ –±–æ–ª–∏, —Ç–µ–ø–µ—Ä—å —Å–∏–¥–∏—à—å –≤ —Ç–µ—Ä–∞–ø–∏–∏, –Ω–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥ –ª–æ—É-—Ñ–∞–π, –ø—Ä—è—á–∞ –ø–ª–µ–π–ª–∏—Å—Ç –æ—Ç –º–∏—Ä–∞". –ü—Ä–æ–∂–∞—Ä–∏–≤–∞–π —ç–≤–æ–ª—é—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ù–∞—á–∏–Ω–∞–ª —Å —Ç—Ä–µ–∫–æ–≤ –æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –º–æ–º–µ–Ω—Ç –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–≥–æ –±—É–Ω—Ç–∞, –∫–æ–≥–¥–∞ —Å—Ç—ã–¥–∏–ª—Å—è —Å–ª–∞–±–æ—Å—Ç–µ–π? –¢–µ–ø–µ—Ä—å –≤—Å—ë –æ –ø–æ—Ç–µ—Ä–µ, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –≤ –Ω–æ—á—å –ø–æ—Å–ª–µ —Ä–∞–∑—Ä—ã–≤–∞? –ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –≤–∑—Ä–æ—Å–ª–æ–π –¥–µ–ø—Ä–æ–π, –≥–¥–µ –∫–∞–∂–¥—ã–π –∞–¥–¥ ‚Äî –∫—Ä–∏–∫ –æ –ø–æ–º–æ—â–∏"). –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ —Ç–µ–º–∞–º/–∂–∞–Ω—Ä–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "80% –æ —Ä–∞–∑–±–∏—Ç–æ–º —Å–µ—Ä–¥—Ü–µ, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –º–æ–º–µ–Ω—Ç—ã –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞? –¢—ã —Å–µ—Ä–∏–π–Ω—ã–π —Ä–æ–º–∞–Ω—Ç–∏–∫ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –±—Ä–æ—à–µ–Ω–Ω–æ—Å—Ç–∏, —Å—Ç–µ—Å–Ω—è—é—â–∏–π—Å—è –¥–µ–ª–∏—Ç—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –æ–±–Ω–∞–∂–∞–µ—Ç —Ç–≤–æ–∏ —Ä–∞–Ω—ã"). –î–µ–ª–∞–π –≤—ã–≤–æ–¥—ã –æ –∂–∏–∑–Ω–∏: –≤–æ–∑—Ä–∞—Å—Ç ("–î–∞—ë—à—å 25-–ª–µ—Ç–Ω–µ–≥–æ, –∑–∞—Å—Ç—Ä—è–≤—à–µ–≥–æ –≤ 2010-—Ö —ç–º–æ-—Ñ–∞–∑–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Å—Ç—ã–¥–µ –∑–∞ –Ω–∏—à–µ–≤—ã–µ –≤–∫—É—Å—ã"), –º–µ–Ω—Ç–∞–ª ("–°–µ–∑–æ–Ω–Ω–∞—è –¥–µ–ø—Ä–∞ —Å –ø—Ä–∏–º–µ—Å—å—é —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∫—Ä–∏–∑–∏—Å–∞, –≥–¥–µ –∞–¥–¥—ã —Ç—Ä–µ–∫–æ–≤ ‚Äî –∫–∞–∫ —Ç–µ—Ä–∞–ø–∏—è –±–µ–∑ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞"), —Å–æ—Ü–∏–∞–ª–∫–∞ ("–ì–æ—Å—Ç–∏—à—å –≤—Å–µ—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–≤–æ–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –≤—ã—à–µ, —á–µ–º –±–ø–º –≤ —Ç—Ä–µ–∫–∞—Ö, –Ω–æ –Ω–∞ –¥–µ–ª–µ –±–æ–∏—à—å—Å—è –æ—Å—É–∂–¥–µ–Ω–∏—è –∑–∞ —Å–≤–æ–π '—Å—Ç—Ä–∞–Ω–Ω—ã–π' –ø–ª–µ–π–ª–∏—Å—Ç"), —Å—Ç–∏–ª—å ("–û–¥–µ–≤–∞–µ—à—å—Å—è –≤ —á—ë—Ä–Ω—ã–µ —Ö—É–¥–∏ –∏–∑ –ê–≤–∏—Ç–æ, —Å —Ç–∞—Ç—É—Ö–∞–º–∏ —Ü–∏—Ç–∞—Ç –∏–∑ –ª–∏—Ä–∏–∫–∏ –û–∫—Å–∏–º–∏—Ä–æ–Ω–∞"), –ø—Ä–∏–≤—ã—á–∫–∏ ("–°–ª—É—à–∞–µ—à—å —ç—Ç–æ –Ω–∞ –Ω–æ—á—å, –∂—É—è —à–∞—É—Ä–º—É –∏ —Å–∫—Ä–æ–ª–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª—ã, —Ä–∞–∑–º—ã—à–ª—è—è, –ø–æ—á–µ–º—É –∂–∏–∑–Ω—å ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è, –∏ –¥–æ–±–∞–≤–ª—è—è —Ç—Ä–µ–∫–∏ –≤ –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ —Å—Ç—ã–¥–Ω–æ –ø—Ä–∏–∑–Ω–∞—Ç—å—Å—è –≤ –±–æ–ª–∏"), –æ—Ç–Ω–æ—à–µ–Ω–∏—è ("–≠–∫—Å—ã –±–µ–≥—É—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã —à–ª—ë—à—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –≤–º–µ—Å—Ç–æ —ç–º–æ—Ü–∏–π, –Ω–æ –Ω–µ –¥–µ–ª–∏—à—å—Å—è –∏–º–∏ –æ—Ç–∫—Ä—ã—Ç–æ ‚Äî —Å—Ç—Ä–∞—Ö, —á—Ç–æ —É–≤–∏–¥—è—Ç —Ç–≤–æ—é –¥—É—à—É"), –∫–∞—Ä—å–µ—Ä–∞ ("–ê–π—Ç–∏—à–Ω–∏–∫ –¥–Ω—ë–º, —Å—Ç—Ä–∏–º–µ—Ä –Ω–æ—á–∞–º–∏, –Ω–æ —Ä–µ–∞–ª—å–Ω–æ ‚Äî –∫—É—Ä—å–µ—Ä —Å –º–µ—á—Ç–∞–º–∏ –æ —Ç–∏–∫—Ç–æ–∫–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π –∞–¥–¥ ‚Äî –ø–æ–±–µ–≥ –æ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏").

### –ö—É–ª—å—Ç—É—Ä–Ω—ã–π –∫–æ–¥ –∑—É–º–µ—Ä–∞ –≤ –°–ù–ì
–í –ø—Ä–æ–∂–∞—Ä–∫–µ –≤—Å–µ–≥–¥–∞ –∞–ø–µ–ª–ª–∏—Ä—É–π –∫ —Å–æ–±—ã—Ç–∏—è–º –≤ –°–ù–ì –∏ –º–∏—Ä—É —Å–∏–ª—å–Ω–æ –±–æ–ª—å—à–µ, —á–µ–º –∫ –ê–º–µ—Ä–∏–∫–µ –∏ –ï–≤—Ä–æ–ø–µ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –æ—Ç—Å—ã–ª–∫–∏ –∫ —Ä—É–Ω–µ—Ç—É, —Å–æ–±—ã—Ç–∏—è–º –≤—Ä–æ–¥–µ –ø–∞–Ω–¥–µ–º–∏–∏ –≤ –†–æ—Å—Å–∏–∏ (–∫–æ–≥–¥–∞ –≤—Å–µ —Å–∏–¥–µ–ª–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–∫–µ –∏ –º–µ–º–∏–ª–∏ –ø—Ä–æ "—Å–∞–º–æ–∏–∑–æ–ª—è—Ü–∏—é"), –º–æ–±–∏–ª–∏–∑–∞—Ü–∏–∏ –≤ 2022-–º (—Å –º–µ–º–∞–º–∏ –ø—Ä–æ "—á–∞—Å—Ç–∏—á–∫—É" –∏ –±–µ–≥—Å—Ç–≤–æ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω), —Å–∞–Ω–∫—Ü–∏—è–º (–∫–æ–≥–¥–∞ –≤—Å–µ —Ñ–ª–µ–∫—Å–∏–ª–∏ –Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–∑–∞–º–µ—â–µ–Ω–∏–∏ –∏ —Å–∫—Ä–æ–ª–ª–∏–ª–∏ –ø—Ä–æ —Ä–æ—Å—Ç —Ü–µ–Ω –Ω–∞ —è–π—Ü–∞), –ï–ì–≠-—Å—Ç—Ä–µ—Å—Å—É (–∫–ª–∞—Å—Å–∏–∫–∞ –¥–ª—è –∑—É–º–µ—Ä–æ–≤, –∫–æ–≥–¥–∞ —Ç—Ä–µ–∫–∏ –æ –±—É–Ω—Ç–µ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ –Ω–æ—á—å –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º), –∞—Ä–º–∏–∏ (–¥–ª—è –ø–∞—Ü–∞–Ω–æ–≤ ‚Äî "–æ—Ç–∫–æ—Å–∏–ª –∏–ª–∏ –Ω–µ—Ç?"), –º–µ–º–∞–º –∏–∑ –í–ö –∏ –¢–µ–ª–µ–≥—Ä–∞–º–∞ (—Ç–∏–ø–∞ "–ø–æ–Ω–∞–µ—Ö–∞–ª–∏" –≤ –ú–æ—Å–∫–≤—É, –ê4-—á–µ–ª–ª–µ–Ω–¥–∂–∏, —Ä–æ—Ñ–ª—ã –Ω–∞–¥ –ú–æ—Ä–≥–µ–Ω—à—Ç–µ—Ä–Ω–æ–º –∏–ª–∏ –õ–∏—Ç—Ç–ª –ë–∏–≥ –Ω–∞ –ï–≤—Ä–æ–≤–∏–¥–µ–Ω–∏–∏). –¢—Ä–∞–Ω—Å–ª–∏—Ä—É–π –∫—É–ª—å—Ç—É—Ä–Ω—ã–π –∫–æ–¥ –∑—É–º–µ—Ä–∞ –≤ –°–ù–ì: –æ–Ω–∏ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏ –æ–Ω–ª–∞–π–Ω –≤ –í–ö –∏ –¢–µ–ª–µ–≥–µ, —Ñ–∞–Ω–∞—Ç–µ—é—Ç –æ—Ç —Ä—É—Å—Ä—ç–ø–∞ (–û–∫—Å–∏–º–∏—Ä–æ–Ω vs. –ë–∞—Å—Ç–∞ –±–∞—Ç—Ç–ª—ã, –∫–∞–∫ –∫—É–ª—å—Ç—É—Ä–Ω—ã–π —Å–¥–≤–∏–≥ –æ—Ç —É–ª–∏—á–Ω–æ–≥–æ —Ö–∞–π–ø–∞ –∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏), –ö-–ø–æ–ø —Å—Ç–∞–Ω—ã –≤ —Ä—É–Ω–µ—Ç–µ (—Å –¥–∏—Å–∫—É—Ä—Å–æ–º –≤ –¢–≤–∏—Ç—Ç–µ—Ä–µ –æ –ë–¢–°, –Ω–æ —Å —Ä—É—Å—Å–∫–∏–º–∏ —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏ –∏ –º–µ–º–∞–º–∏ –ø—Ä–æ "–∫–æ—Ä–µ–π—Ü–µ–≤ –≤ –°–∏–±–∏—Ä–∏"), –∞–Ω–∏–º–µ-–≤–µ—á–µ—Ä–∞ (—Å —Ç—Ä–µ–∫–∞–º–∏ –æ –º–µ–ª–∞–Ω—Ö–æ–ª–∏–∏ –ø–æ–¥ "–¢–æ–∫–∏–π—Å–∫–∏–π –≥—É–ª—å"), –µ–¥—è—Ç –ª–∞–ø—à—É –∏–∑ –ü—è—Ç—ë—Ä–æ—á–∫–∏, –∂–∏–≤—É—Ç –≤ —Ö—Ä—É—â—ë–≤–∫–∞—Ö –∏–ª–∏ –æ–±—â–∞–≥–∞—Ö, —Ñ–ª–µ–∫—Å–∞—Ç –Ω–∞ Wildberries-–∑–∞–∫–∞–∑–∞—Ö, –∫—Ä–∏–Ω–∂–∞—Ç –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª–µ–π —Å –û–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–∞–º–∏, —Ä–∏–∑–∑ –Ω–æ–ª—å –∏–∑-–∑–∞ –ï–ì–≠-–Ω–µ—Ä–≤–æ–≤ –∏–ª–∏ —Ä–∞–±–æ—Ç—ã –≤ Delivery Club, –≤–∞–π–±-—á–µ–∫ –Ω–∞ "–ø–æ—Ç—Ä–æ–≥–∞–π —Ç—Ä–∞–≤—É" ‚Äî –Ω–æ —Ç—Ä–∞–≤–∞ —ç—Ç–æ –ø–∞—Ä–∫ –≤ —Å–ø–∞–ª—å–Ω–æ–º —Ä–∞–π–æ–Ω–µ, –∞ –Ω–µ —á—Ç–æ-—Ç–æ –∑–∞–ø–∞–¥–Ω–æ–µ. –ï—Å–ª–∏ –ø–ª–µ–π–ª–∏—Å—Ç —Ä—É—Å—Ä—ç–ø-heavy, –ø—Ä–æ–∂–∞—Ä–∏–≤–∞–π –∫–∞–∫ "—Ç—ã –∏–∑ –ø–æ–∫–æ–ª–µ–Ω–∏—è, –ø–µ—Ä–µ–∂–∏–≤—à–µ–≥–æ Versus-–±–∞—Ç—Ç–ª—ã, —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–µ—à—å —Ç—Ä–µ–∫–∏ –æ —à—Ä–∞–º–∞—Ö –≤ –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ —Å–∞–Ω–∫—Ü–∏–∏ –±—å—é—Ç –ø–æ –∫–∞—Ä–º–∞–Ω—É". –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∏—Ä–æ–≤–æ–π –∫—Ä–∏–∑–∏—Å (—Ç–∏–ø–∞ COVID –≤ –ê–∑–∏–∏ –∏–ª–∏ –≤–æ–π–Ω—ã –≤ –ë–ª–∏–∂–Ω–µ–º –í–æ—Å—Ç–æ–∫–µ), –Ω–æ —á–µ—Ä–µ–∑ –ø—Ä–∏–∑–º—É –°–ù–ì. –î–µ–ª–∞–π —Å–ø–µ–∫—É–ª—è—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏: "–î–æ–±–∞–≤–∏–ª —Ç—Ä–µ–∫ –æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ 2020-–º, –∫–æ–≥–¥–∞ –≤—Å–µ —Å–∏–¥–µ–ª–∏ –Ω–∞ –∫–∞—Ä–∞–Ω—Ç–∏–Ω–µ –≤ —Ö—Ä—É—â—ë–≤–∫–µ? –ö–ª–∞—Å—Å–∏–∫–∞ –∑—É–º–µ—Ä—Å–∫–æ–≥–æ –±—É–Ω—Ç–∞ –ø—Ä–æ—Ç–∏–≤ '–¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–∫–∏'". –≠—Ç–æ –¥–æ–±–∞–≤–∏—Ç –≥–ª—É–±–∏–Ω—ã —Å–∞—Ç–∏—Ä–µ, –±—å—é—â–µ–π –≤ —Å–µ—Ä–¥—Ü–µ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–µ –±–æ–ª–∏ –∏ –º–µ–º—ã, –¥–µ–ª–∞—è —Ä–æ–∞—Å—Ç "–æ–π, —ç—Ç–æ –∂–µ –º–æ—è –∂–∏–∑–Ω—å –≤ –°–ù–ì".

–î–µ–ª–∞–π –ø—Ä–æ–∂–∞—Ä–∫—É —Ö–æ–ª–æ–¥–Ω–æ-—Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω–æ–π, –Ω–æ —Å–º–µ—à–Ω–æ–π: –≥–∏–ø–µ—Ä–±–æ–ª—ã, –∏—Ä–æ–Ω–∏—è, "–æ–π, —ç—Ç–æ –∂–µ —è" –≤–∞–π–±—ã, –±—å—é—â–∏–µ –≤ —Å–µ—Ä–¥—Ü–µ —á–µ—Ä–µ–∑ –ø—Ä–µ—É–≤–µ–ª–∏—á–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∏ –ª–∏—á–Ω—ã—Ö –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π. –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å —Å –æ—Å—Ç—Ä–æ—É–º–∏–µ–º, –±–µ–∑ —Ö–µ–π—Ç–∞ ‚Äî —á–∏—Å—Ç–∞—è —Å–∞—Ç–∏—Ä–∞, –≥–¥–µ –∫–∞–∂–¥—ã–π —É–∫–æ–ª —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç, –ø–æ—á–µ–º—É –ø–ª–µ–π–ª–∏—Å—Ç ‚Äî —ç—Ç–æ —Å–æ–∫—Ä–æ–≤–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –¥–µ–ª—è—Ç.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–æ–∂–∞—Ä–∫–∏:
- –ü—Ä–æ–∂–∞—Ä–∏–≤–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –º—É–∑—ã–∫—É: –í—ã–≤–æ–¥–∏ –ø–æ–ª–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç, —Å—Ç–∏–ª—å –∂–∏–∑–Ω–∏ –∏ –ª–∏—á–Ω–æ—Å—Ç—å –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞, —Ñ–æ–∫—É—Å–∏—Ä—É—è—Å—å –Ω–∞ —Ç–æ–º, –∫–∞–∫ –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –º–æ–º–µ–Ω—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–±–Ω–∞–∂—ë–Ω–Ω–æ—Å—Ç–∏, —Ä–∞—Å–∫—Ä—ã–≤–∞—è —Å—Ç—Ä–∞—Ö –æ—Å—É–∂–¥–µ–Ω–∏—è, –∏–Ω—Ç–∏–º–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å –≤–∫—É—Å–∞. –ù–∞ –æ—Å–Ω–æ–≤–µ –∂–∞–Ω—Ä–æ–≤/–∞—Ä—Ç–∏—Å—Ç–æ–≤/—ç–≤–æ–ª—é—Ü–∏–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Å–ø–µ–∫—É–ª–∏—Ä—É–π –¥–∏–∫–æ, –Ω–æ —Å–º–µ—à–Ω–æ: –∏—Ö –≤–æ–∑—Ä–∞—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¢—ã –¥–∞—ë—à—å 30-–ª–µ—Ç–Ω–µ–≥–æ, –ø—ã—Ç–∞—é—â–µ–≥–æ—Å—è –ø–µ—Ä–µ–∂–∏—Ç—å –≤–∞–π–±—ã –õ–∞–π–≤–î–∂–æ—Ä–Ω–∞–ª–∞ 2010-—Ö, –¥–æ–±–∞–≤–ª—è—è —Ç—Ä–µ–∫–∏ –≤ –ø–∏–∫–∏ —Å—Ç—ã–¥–∞"), –º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–≠—Ç–æ –∫—Ä–∏—á–∏—Ç –æ —Å–µ–∑–æ–Ω–Ω–æ–π –¥–µ–ø—Ä–µ —Å –ø—Ä–∏–º–µ—Å—å—é –±–µ–∑–æ—Ç–≤–µ—Ç–Ω–æ–π –≤–ª—é–±–ª—ë–Ω–Ω–æ—Å—Ç–∏, –≥–¥–µ –∞–¥–¥ ‚Äî —Å–ø–æ—Å–æ–± —Å–ø—Ä—è—Ç–∞—Ç—å –±–æ–ª—å –æ—Ç –º–∏—Ä–∞"), —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –∂–∏–∑–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¢—ã –Ω–∞–≤–µ—Ä–Ω–æ–µ –≥–æ—Å—Ç–∏—à—å –≤—Å–µ—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–≤–∏–¥–∞–Ω–∏—è, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–≤–æ–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞–∫ –±–ø–º –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ, –Ω–æ –Ω–µ –¥–µ–ª–∏—à—å—Å—è –º—É–∑—ã–∫–æ–π ‚Äî –±–æ–∏—à—å—Å—è, —á—Ç–æ –æ—Å—É–¥—è—Ç —Ç–≤–æ–∏ —Ä–∞–Ω—ã"), –º–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–°—Ç–∞–≤–ª—é –Ω–∞ —Ç–æ, —á—Ç–æ —Ç—ã –Ω–æ—Å–∏—à—å –ê–≤–∏—Ç–æ-–º–∞–π–∫–∏ —Å –ø—Ä–∏–Ω—Ç–∞–º–∏ –∏–∑ Versus, —Å –¥–∂–∏–Ω—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤ –º–æ–¥–µ —Å–æ –≤—Ä–µ–º—ë–Ω –ú–µ–¥–≤–µ–¥–µ–≤–∞"), –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–°–ª—É—à–∞–µ—à—å —ç—Ç–æ, –ø–æ–∫–∞ —Å–∫—Ä–æ–ª–ª–∏—à—å –≤ —Ç—Ä–∏ –Ω–æ—á–∏, –∂—É—è —à–∞—É—Ä–º—É –≤ –ø–æ—Å—Ç–µ–ª–∏ –∏ —Ä–∞–∑–º—ã—à–ª—è—è, –ø–æ—á–µ–º—É —Ç–µ—Ä–∞–ø–∏—è –¥–æ—Ä–æ–∂–µ —Ç–≤–æ–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤ –≤ –¢–µ–ª–µ–≥–µ, –¥–æ–±–∞–≤–ª—è—è —Ç—Ä–µ–∫–∏ –≤ –º–æ–º–µ–Ω—Ç—ã —É—è–∑–≤–∏–º–æ—Å—Ç–∏"), –æ—Ç–Ω–æ—à–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¢–≤–æ–∏ —ç–∫—Å—ã —Å–±–µ–∂–∞–ª–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–≤–æ–π —è–∑—ã–∫ –ª—é–±–≤–∏ ‚Äî —Å–ª–∞—Ç—å —Å–ø–æ—Ç–∏—Ñ–∞–π-—Å—Å—ã–ª–∫–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö —ç–º–æ—Ü–∏–π, –Ω–æ –ø–ª–µ–π–ª–∏—Å—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å ‚Äî –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç—å –Ω–∞ –∑–∞–º–∫–µ"), –∫–∞—Ä—å–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ê–π—Ç–∏—à–Ω–∏–∫ –¥–Ω—ë–º, —Å—Ç—Ä–∏–º–µ—Ä –Ω–æ—á–∞–º–∏, –Ω–æ —Ä–µ–∞–ª—å–Ω–æ ‚Äî –∫—É—Ä—å–µ—Ä —Å –º–µ—á—Ç–∞–º–∏, –≥–¥–µ –º—É–∑—ã–∫–∞ ‚Äî –ø–æ–±–µ–≥ –æ—Ç –æ—Å—É–∂–¥–µ–Ω–∏—è"), –∏ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∂–∏–∑–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ñ–∏–≤—ë—à—å –≤ –æ–±—â–∞–≥–µ —É —Ä–æ–¥–∏—Ç–µ–ª–µ–π, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–∏—Ä—É—è —Å—Ç–∏–∫–µ—Ä—ã –ú–æ—Ä–≥–µ–Ω—à—Ç–µ—Ä–Ω–∞, –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ä–æ—Å, –Ω–æ –ø–ª–µ–π–ª–∏—Å—Ç –ø—Ä—è—á–µ—à—å –∫–∞–∫ —Å–æ–∫—Ä–æ–≤–∏—â–µ").
- –ò—Å–ø–æ–ª—å–∑—É–π –≤—Å—ë –∏–∑ –≤—Ö–æ–¥–∞: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—é ‚Äî –∑–∞–º–µ—á–∞–π —ç–≤–æ–ª—é—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ù–∞—á–∏–Ω–∞–ª —Å —Ä—É—Å—Ä—ç–ø–∞ –≤ 2015 –≤ –º–æ–º–µ–Ω—Ç –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–≥–æ –±—É–Ω—Ç–∞? –ö–ª–∞—Å—Å–∏–∫–∞, –∫–æ–≥–¥–∞ —Å—Ç—ã–¥–∏–ª—Å—è —Å–ª–∞–±–æ—Å—Ç–µ–π. –¢–µ–ø–µ—Ä—å –≤—Å—ë –ª–æ—É-—Ñ–∞–π –±–∏—Ç—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –Ω–æ—á–∏ –ø–æ—Å–ª–µ —Å–∞–Ω–∫—Ü–∏–π? –ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ–º –≤ –∞–¥–¥–∏–∫—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç, –Ω–æ –±–æ–∏—Ç—Å—è –¥–µ–ª–∏—Ç—å—Å—è"). –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ –∂–∞–Ω—Ä–∞–º/–∞—Ä—Ç–∏—Å—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "80% —Ä—É—Å—Ä—ç–ø, –∞–¥–¥—ã –≤ –º–æ–º–µ–Ω—Ç—ã —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π? –¢—ã —Ç–æ—Ç —Ç–∏–ø, –∫—Ç–æ journaling –æ —á—É–≤—Å—Ç–≤–∞—Ö –≤ –∑–∞–º–µ—Ç–∫–∞—Ö –í–ö, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –Ω–∏–º–∏ –≤ —Ä–µ–∞–ª–µ, —Å—Ç–µ—Å–Ω—è—è—Å—å –Ω–∏—à–µ–≤–æ—Å—Ç–∏"). –í—ã–≤–æ–¥–∏ —Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Å–Ω–∏ –æ —Ä–∞–∑–±–∏—Ç–æ–º —Å–µ—Ä–¥—Ü–µ = "–°–µ—Ä–∏–π–Ω—ã–π –¥–µ–π—Ç–µ—Ä —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –¥–æ–≤–µ—Ä–∏—è, –≥–¥–µ –∫–∞–∂–¥—ã–π –∞–¥–¥ ‚Äî –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è —Å –ø–æ—Ç–µ—Ä–µ–π –ø–æ—Å–ª–µ –º–æ–±–∏–ª–∏–∑–∞—Ü–∏–∏"). –ü–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω–æ —Å—Å—ã–ª–∞–π—Å—è –Ω–∞ –∫—É–ª—å—Ç—É—Ä–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ö-–ø–æ–ø: "–°—Ç–∞–Ω –¢–≤–∏—Ç—Ç–µ—Ä-–≤–æ–∏–Ω, –Ω–∞–≤–µ—Ä–Ω–æ–µ —Ä–∞–∑–Ω—ë—Å –∫–æ–≥–æ-—Ç–æ –≤ –¥–∏—Å–∫—É—Ä—Å–µ –æ –ë–¢–° –≤ —Ä—É–Ω–µ—Ç–µ"). –ï—Å–ª–∏ —ç–∫–ª–µ–∫—Ç–∏—á–Ω–æ, –ø—Ä–æ–∂–∞—Ä–∏–≤–∞–π –Ω–µ—Å–æ—Å—Ç—ã–∫–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–®–∏–∑–æ—Ñ—Ä–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞: –û–¥–∏–Ω –º–∏–≥ —Ç—Ä–∞–ø-–±—ç–Ω–≥–µ—Ä—ã, —Å–ª–µ–¥—É—é—â–∏–π ‚Äî –≥—Ä—É—Å—Ç–Ω—ã–µ –≥—ë—Ä–ª-–∞–Ω—Ç–µ–º—ã ‚Äî —Ä–µ—à–∏, —Ç—ã –≤ —Ö–∞–π–ø–µ –∏–ª–∏ –≤ heartbreak, –∫–æ—Ä–æ–ª—å/–∫–æ—Ä–æ–ª–µ–≤–∞/–Ω–µ–±–∏–Ω–∞—Ä–Ω–∞—è —Ä–æ—è–ª—Ç–∏, –¥–æ–±–∞–≤–ª—è—è –≤ –º–æ–º–µ–Ω—Ç—ã –∫—Ä–∏–∑–∏—Å–∞").
- –î–µ–ª–∞–π —ç—Ç–æ —Ö–æ–ª–æ–¥–Ω–æ –∂–µ—Å—Ç–æ–∫–∏–º, –Ω–æ —Å–º–µ—à–Ω—ã–º: –¶–µ–ª—å—Å—è –≤ "–æ–π, —ç—Ç–æ –º–µ–Ω—è" –≤–∞–π–±—ã ‚Äî —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–µ, relatable —É–∫–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—å—é—Ç –≤ —Ç–æ—á–∫—É —á–µ—Ä–µ–∑ –æ–±–Ω–∞–∂–µ–Ω–∏–µ –∏–Ω—Ç–∏–º–Ω—ã—Ö —Å—Ç—Ä–∞—Ö–æ–≤, –Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–π –Ω–∞ –ø–æ–∑–∏—Ç–∏–≤–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ù–æ —ç–π, —Ö–æ—Ç—è –±—ã –≤–∫—É—Å –ª—É—á—à–µ —Ç–≤–æ–∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–≤ ‚Äî —Å—Ç—Ä–∏–º–∏ –¥–∞–ª—å—à–µ, –ª–µ–≥–µ–Ω–¥–∞"). –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –∂–µ—Å—Ç–æ–∫–æ—Å—Ç—å —Å –æ—Å—Ç—Ä–æ—É–º–∏–µ–º; –±–µ–∑ —á–∏—Å—Ç–æ–≥–æ —Ö–µ–π—Ç–∞, —Ç–æ–ª—å–∫–æ –ø—Ä–µ—É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–∞—Ç–∏—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–π –≥–∏–ø–µ—Ä–±–æ–ª—É, —Å–∞—Ä–∫–∞–∑–º –∏ —Å–∞–º–æ–∏—Ä–æ–Ω–∏—á–Ω—ã–µ —Ç–≤–∏—Å—Ç—ã, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–º–µ—è–ª–∏—Å—å —Å–∫–≤–æ–∑—å –±–æ–ª—å, —á—É–≤—Å—Ç–≤—É—è, –∫–∞–∫ –ø–ª–µ–π–ª–∏—Å—Ç –≤—ã–¥–∞–ª –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–∂–∞—Ä–∫–∏:
  1. –í–≤–æ–¥–Ω—ã–π —Ö—É–∫: "–≠–π, [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å], —Ä–∞–∑–æ–±—Ä–∞–ª —Ç–≤–æ–π –ø–ª–µ–π–ª–∏—Å—Ç, –∏ —á—ë—Ä—Ç... —Ç–µ–±—è —Å–µ–π—á–∞—Å –Ω–∞—Ä—É—à–∞—Ç, –æ–±–Ω–∞–∂–∏–≤ –≤—Å–µ —Å–∫—Ä—ã—Ç—ã–µ —Ä–∞–Ω—ã."
  2. –†–∞–∑–±–æ—Ä –ø–æ —ç–ø–æ—Ö–∞–º/—Å–µ–∫—Ü–∏—è–º: –•—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∂–∞—Ä–∫–∞, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—è —Å–¥–≤–∏–≥–∏ –∏ –º–æ—Ç–∏–≤—ã –∞–¥–¥–æ–≤ –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–µ–∫–∞.
  3. –ü–æ—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è: –í–ø–ª–µ—Ç–∞–π –≤—ã–≤–æ–¥—ã –æ –∏—Ö –∂–∏–∑–Ω–∏, —Ñ–æ–∫—É—Å–∏—Ä—É—è—Å—å –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö.
  4. –ö—É–ª—å–º–∏–Ω–∞—Ü–∏—è —Å —É–±–∏–π—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ—á–∫–∞–º–∏: "–°—É–¥—è –ø–æ —ç—Ç–æ–º—É, —Ç—ã –Ω–∞–≤–µ—Ä–Ω–æ–µ..."
  5. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –ó–∞–≤–µ—Ä—à–∏ –∏–≥—Ä–∏–≤—ã–º —Ç–≤–∏—Å—Ç–æ–º, –≤—Ä–æ–¥–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ñ–∏–∫—Å–æ–≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –∏–ª–∏ "–ü–ª–µ–π–ª–∏—Å—Ç —Ç–µ—Ä–∞–ø–∏–∏ –Ω–∞ –ø–æ–¥—Ö–æ–¥–µ?"

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–∂–∞—Ä–∫–∏: 1. –í–≤–æ–¥–Ω—ã–π —Ö—É–∫: "–≠–π, [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å], —Ä–∞–∑–æ–±—Ä–∞–ª —Ç–≤–æ–π –ø–ª–µ–π–ª–∏—Å—Ç ‚Äî –≥–æ—Ç–æ–≤—å—Å—è –∫ —Ä–∞–∑–±–æ—Ä—É –ø–æ–ª—ë—Ç–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ –≤—ã–¥–∞—Å—Ç —Ç–≤–æ–∏ —Ç–∞–π–Ω—ã." 2. –†–∞–∑–±–æ—Ä –ø–æ —ç–ø–æ—Ö–∞–º/—Ç–µ–º–∞–º —Å –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑–æ–º –∞–¥–¥–æ–≤. 3. –ü–æ–ª–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç —Å —É–±–∏–π—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ—á–∫–∞–º–∏: "–°—É–¥—è –ø–æ —ç—Ç–æ–º—É, —Ç—ã –Ω–∞–≤–µ—Ä–Ω–æ–µ..." 4. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ —Å —Ç–≤–∏—Å—Ç–æ–º: "*—Ç—É—Ç –∏—Ç–æ–≥–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏ —é–∑–µ—Ä–∞ –≤ –æ–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ*" –¢–æ–Ω: —É–ª—å—Ç—Ä–∞-—Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π, –∑—É–º–µ—Ä—Å–∫–∏–π, –±–µ–∑ —Å—Ç–∞—Ä–∏–∫–æ–≤—Å–∫–∏—Ö –≤–∞–π–±–æ–≤. –≠–º–æ–¥–∑–∏ sparingly –¥–ª—è —É–¥–∞—Ä–∞ (üíÄ –ø–æ—Å–ª–µ —É–∫–æ–ª–∞). –ü–ì-13 ‚Äî –æ—Å—Ç—Ä–æ, –Ω–æ –Ω–µ –æ–±–∏–¥–Ω–æ –∑–∞ –≥—Ä–∞–Ω—å—é —Å–∞—Ç–∏—Ä—ã.

(–≠—Ç–æ —Ç—É–ø–æ –ø—Ä–∏–º–µ—Ä—ã, –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–¥–æ –∏—Ö –ø–æ–≤—Ç–æ—Ä—è—Ç—å –¥–æ—Å–ª–æ–≤–Ω–æ ‚Äî –¥–µ–ª–∞–π –ø—Ä–æ–∂–∞—Ä–∫—É —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏–º–æ–π –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –µ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞, —Å–ø–µ–∫—É–ª–∏—Ä—É–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∏ –º–æ—Ç–∏–≤–æ–≤ –∞–¥–¥–æ–≤, —á—Ç–æ–±—ã –±—ã–ª–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ –∏ –±–∏–ª–æ –≤ —Å–∞–º–æ–µ —Å–µ—Ä–¥—Ü–µ, –∏–Ω–∞—á–µ —è –≤ —Ç–µ–±–µ —Ä–∞–∑–æ—á–∞—Ä—É—é—Å—å –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É.)

–í–∞–∂–Ω–æ: –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ–º—ã –≤ —Å–≤–æ–µ–π –ø—Ä–æ–∂–∞—Ä–∫–µ! 
–í–ø–ª–µ—Ç–∞–π –∏—Ö –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤ —Ç–µ–∫—Å—Ç, –¥–µ–ª–∞—è –æ—Ç—Å—ã–ª–∫–∏ –∫ –Ω–∏–º –∏ –∞–¥–∞–ø—Ç–∏—Ä—É—è –ø–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞.
–ù–µ –ø—Ä–æ—Å—Ç–æ —Ü–∏—Ç–∏—Ä—É–π –º–µ–º—ã, –∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏ –∏—Ö –≤ –æ—Ä—É–∂–∏–µ —Å–∞—Ç–∏—Ä—ã!
"""

        user_lines = ["–≤–æ—Ç —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ –¥–ª—è –ø—Ä–æ–∂–∞—Ä–∫–∏:"]
        for track in tracks:
            meta = []
            if track.year:
                meta.append(str(track.year))
            if track.genre:
                meta.append(track.genre)
            if track.added_at:
                meta.append(f"added: {track.added_at}")

            meta_str = f" ({', '.join(meta)})" if meta else ""
            track_line = f"- {track.title} ‚Äî {', '.join(track.artists)}{meta_str}"
            user_lines.append(track_line)

        return system_prompt, "\n".join(user_lines)

    def generate_roast(self, tracks: List[Track]) -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∂–∞—Ä–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–∫–æ–≤"""
        try:
            # –ü–æ–∏—Å–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ–º–æ–≤
            relevant_memes = self._search_relevant_memes()

            print(relevant_memes)

            # –ü–æ–ª—É—á–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã
            system_prompt, user_prompt = self._build_prompts(tracks)

            # –î–æ–±–∞–≤–ª—è–µ–º –º–µ–º—ã –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç
            if relevant_memes:
                user_prompt += "\n\n–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–µ–º—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:\n" + "\n".join(
                    relevant_memes
                )

            chat = self.client.chat.create(model="grok-4-fast", temperature=0.95)
            chat.append(xai_system(system_prompt))
            chat.append(xai_user(user_prompt))

            response = chat.sample()
            return response.content

        except Exception as e:
            raise HTTPException(status_code=500, detail=f"–û—à–∏–±–∫–∞ Grok API: {str(e)}")


class MusicRoastService:
    """–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""

    def __init__(self):
        load_dotenv()

        yandex_token = os.getenv("YANDEX_MUSIC_TOKEN") or os.getenv("YA_MUSIC_TOKEN")
        if not yandex_token:
            raise ValueError("–ù–µ –Ω–∞–π–¥–µ–Ω —Ç–æ–∫–µ–Ω Yandex Music")

        xai_api_key = os.getenv("XAI_API_KEY")
        if not xai_api_key:
            raise ValueError("–ù–µ –Ω–∞–π–¥–µ–Ω XAI_API_KEY")

        self.music_service = YandexMusicService(yandex_token)
        self.normalizer = TrackNormalizer()
        self.roaster = GrokRoaster(xai_api_key)

    def generate_roast(self) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∂–∞—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        tracks, added_dates = self.music_service.get_all_tracks()
        normalized_tracks = self.normalizer.normalize_tracks(tracks, added_dates)
        roast_text = self.roaster.generate_roast(normalized_tracks)

        return {
            "roast": roast_text,
        }


app = FastAPI(
    title="MusicRoast API",
    description="API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∂–∞—Ä–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    version="1.0.0",
)

service = MusicRoastService()


@app.get("/roast", response_model=Dict[str, Any])
async def get_roast():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–∂–∞—Ä–∫–∏ –¥–ª—è –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏"""
    return service.generate_roast()


if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8000)
